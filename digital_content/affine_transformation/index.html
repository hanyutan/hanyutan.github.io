<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Affine Transformation - Keep Learning</title>
<meta name="description" content="Han Yutan">
<meta name="generator" content="Hugo 0.58.1" />
<link href="https://hanyutan.gitee.ioindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://hanyutan.gitee.io/digital_content/affine_transformation/">
<link rel="stylesheet" href="https://hanyutan.gitee.io/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://hanyutan.gitee.io/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://hanyutan.gitee.io/js/functions.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://hanyutan.gitee.io/js/jquery.backtothetop/jquery.backtothetop.min.js"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
        inlineMath: [ ['$', '$'] ],
        displayMath: [ ['$$', '$$']],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>
<body>
<div class="container"><header>
<h1>Keep Learning</h1>

 <span class="version">Version 1.0</span>
<a href="https://gitee.com/hanyutan" class="github"><i class="fab fa-github"></i></a>
<p class="description">Han Yutan</p>

</header>
<div class="menu">
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="https://www.instagram.com/philoartist97/">Instagram</a></li>
<li><a href="/default_post/goisforlovers/">(Hu)go Template Primer</a></li>
<li><a href="/about/">About Hugo</a></li>
<li><a href="/default_post/hugoisforlovers/">Getting Started with Hugo</a></li><li class="parent"><a href="">Tutorials<i class="fas fa-angle-right"></i></a>
<ul class="sub-menu">
<li class="child"><a href="/default_post/creating-a-new-theme/">Creating a New Theme</a></li>
<li class="child"><a href="/default_post/migrate-from-jekyll/">Migrating from Jekyll</a></li>
</ul>
</li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>Affine Transformation</h1>

<p>affine transformation</p>

<p>[ToC]</p>

<p>仿射变换——计算机图形学应用非常广泛的一种变换，包括平移、旋转、缩放、剪切等。</p>

<h2 id="平移变换">平移变换</h2>

<p>$$
\begin{bmatrix}x&amp;y&amp;z&amp;1\end{bmatrix}\times\begin{bmatrix}1 &amp; 0 &amp; 0 &amp; 0 \0 &amp; 1 &amp; 0 &amp; 0 \0 &amp; 0 &amp; 1 &amp; 0 \a &amp; b &amp; c &amp; 1 \end{bmatrix}=\begin{bmatrix}x+a&amp;y+b&amp;z+c&amp;1\end{bmatrix}
$$</p>

<h2 id="旋转变换">旋转变换</h2>

<p>参考链接：<a href="https://blog.csdn.net/csxiaoshui/article/details/65446125">https://blog.csdn.net/csxiaoshui/article/details/65446125</a></p>

<h3 id="二维旋转变换-绕着某一个点旋转">二维旋转变换（绕着某一个点旋转）</h3>

<p>矩阵*列向量</p>

<ul>
<li><p>绕原点的二维旋转变换，$\theta\in(0,2\pi)$</p>

<p><img src="image-20191116111854299.png" width = "200" align=center /></p>

<p><img src="image-20191116112713104.png" width = "250" align=center /></p></li>

<li><p>绕任意点的二维旋转变换，平移——旋转——平移</p>

<p><img src="image-20191116113106962.png" width = "500" align=center /></p></li>
</ul>

<h3 id="三维旋转变换-绕着某一个轴旋转">三维旋转变换（绕着某一个轴旋转）</h3>

<p>三种描述三维旋转的方式：旋转矩阵、四元数（Quaternion）、欧拉角（Euler Angles）、旋转轴、旋转角</p>

<h4 id="旋转矩阵">旋转矩阵</h4>

<p><a href="https://blog.csdn.net/csxiaoshui/article/details/65446125">参考链接</a></p>

<p>旋转矩阵是正交的</p>

<ul>
<li>绕x轴顺时针旋转 $\theta$ 弧度</li>
</ul>

<p>$$
\begin{bmatrix}x&amp;y&amp;z&amp;1\end{bmatrix}\times\begin{bmatrix}1 &amp; 0 &amp; 0 &amp; 0 \0 &amp; cos\theta &amp; sin\theta &amp; 0 \0 &amp; -sin\theta &amp; cos\theta &amp; 0 \0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}=\begin{bmatrix}x&amp;y&rsquo;&amp;z&rsquo;&amp;1\end{bmatrix}
$$</p>

<ul>
<li>绕y轴顺时针旋转 $\theta$ 弧度</li>
</ul>

<p>$$
\begin{bmatrix}x&amp;y&amp;z&amp;1\end{bmatrix}\times\begin{bmatrix}cos\theta &amp; 0 &amp; -sin\theta &amp; 0 \0 &amp; 1 &amp; 0 &amp; 0 \sin\theta &amp; 0 &amp; cos\theta &amp; 0 \0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}=\begin{bmatrix}x&rsquo;&amp;y&amp;z&rsquo;&amp;1\end{bmatrix}
$$</p>

<ul>
<li>绕z轴顺时针旋转 $\theta$ 弧度</li>
</ul>

<p>$$
\begin{bmatrix}x&amp;y&amp;z&amp;1\end{bmatrix}\times\begin{bmatrix}cos\theta &amp; sin\theta &amp; 0 &amp; 0 \-sin\theta &amp; cos\theta &amp; 0 &amp; 0  \0 &amp; 0 &amp; 1 &amp; 0 \0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}=\begin{bmatrix}x&rsquo;&amp;y&rsquo;&amp;z&amp;1\end{bmatrix}
$$</p>

<h4 id="欧拉角">欧拉角</h4>

<p><a href="https://blog.csdn.net/csxiaoshui/article/details/65437633">参考链接</a></p>

<p>欧拉旋转定理：任何一个旋转都可以用三个旋转的参数来表示。</p>

<p><strong>1. 欧拉角简介</strong></p>

<p>但由于没有统一定义，所以不同人描述的欧拉角不一样。需要首先确定：</p>

<p><strong>1）三个旋转角的组合方式</strong></p>

<p>Proper Euler Angle （ xyx / xzx / yxy / yzy / zxz / zyz ）仅仅在2个平面上进行旋转组合就可以得到任意的三维旋转</p>

<p>Tait-Bryan Angle（xyz / yzx / zxy / zyx / xzy / yxz ）</p>

<p><strong>2）旋转角度的参考坐标系</strong></p>

<p>相对于某个固定的坐标系（extrinsic rotations）游戏中相对于统一的世界坐标<br>相对于物体自身的坐标系（intrinsic rotations）<br>所以结合上面旋转角的组合方式，总共有24种排列组合</p>

<p><strong>3）使用旋转角度左手系还是右手系</strong></p>

<p>如何确定旋转角的正负：如果是右手系，用右手拇指指向旋转轴，手指握拳为正、反之为负</p>

<p><strong>4）三个旋转角度的记法</strong></p>

<table>
<thead>
<tr>
<th>绕哪个轴</th>
<th>飞行器</th>
<th>望远镜</th>
<th>符号</th>
<th>角速度</th>
</tr>
</thead>

<tbody>
<tr>
<td>y</td>
<td>heading</td>
<td>azimuth</td>
<td>$ \theta $</td>
<td>yaw</td>
</tr>

<tr>
<td>z</td>
<td>attitude</td>
<td>elevation</td>
<td>$ \phi$</td>
<td>pitch</td>
</tr>

<tr>
<td>x</td>
<td>bank</td>
<td>tilt</td>
<td>$\psi$</td>
<td>roll</td>
</tr>
</tbody>
</table>

<p><img src="image-20191116161801502.png" width = "500" align=center /></p>

<p><strong>2.相关问题</strong></p>

<p><strong>1）连续旋转</strong></p>

<p>当进行两次欧拉角描述的旋转时，不能简单使用相加来得到最终的旋转效果$(a_1,a_2,a_3)+(b_1,b_2,b_3)$。一般会将欧拉角转换为旋转矩阵或者四元数来进行连续旋转的叠加计算，之后再转换回欧拉角，但是次数多的时候会引入很大误差。</p>

<p><strong>2）万向节死锁 Gimbal lock</strong></p>

<p>当某一个角为90度使得两个轴的轴向平行时，修改另外两个角度效果是一样的，导致旋转仅仅只能在两个维度上进行。</p>

<p><img src="image-20191116163328555.png" width = "600" align=center /></p>

<p><strong>3 ）总结</strong></p>

<p>由于以上问题，在使用欧拉角时需要格外小心，要确定欧拉角的定义描述一致，还要尽量避免产生万向节死锁。</p>

<p>最好直接使用旋转矩阵或四元数来计算这类问题。</p>

<h4 id="四元数">四元数</h4>

<p><a href="https://blog.csdn.net/csxiaoshui/article/details/65445633">参考链接1</a>  <a href="https://blog.csdn.net/candycat1992/article/details/41254799">参考链接2</a></p>

<p>使用4个分量来描述三维旋转</p>

<p>$q=s+xi+yj+zk$，$(s,x,y,z\in\R)$，$i^2=j^2=k^2=ijk=-1$</p>

<p>其中： <br>$i*i=j*j=k*k=-1$，<br>$i*j=k, j*i=-k$，<br>$j*k=i, k*j=-i$，<br>$k*i=j, i*k=-j$</p>

<p><strong>四元数变换</strong></p>

<p>先将点P扩展到四元数空间 $p=0+xi+yj+zk$，然后计算$p&rsquo;=qpq^*$，得到新的坐标即为$p&rsquo;$的虚部系数。<strong>注意计算时$u$是单位向量，复数不满足交换律。</strong></p>

<p><strong>绕单位向量u旋转$\theta$角度构造四元数</strong></p>

<p>$u=(u_x,u_y,u_z)=u_xi+u_yj+u_zk$，模长为1</p>

<p>$q=e^{\frac{\theta}{2}(u_xi+u_yj+u_zk)}=cos\frac{\theta}{2}+(u_xi+u_yj+u_zk)sin\frac{\theta}{2}$</p>

<p><strong>从一个向量旋转到另一个向量构造四元数</strong></p>

<p>旋转轴可以通过两个向量的叉乘得到，旋转角度可以通过两个向量间的夹角得到 ，然后转换成上面绕向量u旋转角度的问题</p>

<p><strong>从四元数获取旋转矩阵和旋转角</strong></p>

<p>对四元数 $q=s+xi+yj+zk$ 计算旋转角$ \theta$和旋转轴$(u_x,u_y,u_z)$</p>

<p>$\theta=2arccos(s)$，$u_x=\frac{x}{\sqrt{1-s^2}}$，$u_y=\frac{y}{\sqrt{1-s^2}}$，$u_z=\frac{z}{\sqrt{1-s^2}}$</p>

<p><strong>复习</strong></p>

<p>欧拉公式：$e^{-ix}=cosx-isinx$</p>

<p>复数：$z=a+bi$，$a,b\in\R$，$i^2=-1$</p>

<p>共轭复数：$z^<em>=a-bi$，复数的模：$|z|=\sqrt{zz^</em>}=\sqrt{a^2+b^2}$</p>

<p>复平面分为实轴和虚轴（类似于二维直角坐标系中的x轴和y轴），当我们使用 $i$ 去乘以一个复数时，得到的位置正好是绕原点逆时针旋转90度的效果</p>

<p><img src="image-20191116195904006.png" width = "300" align=center /></p>

<p><img src="image-20191116200322889.png" alt="image-20191116200322889" /></p>

<h2 id="缩放矩阵">缩放矩阵</h2>

<p>$$
\begin{bmatrix}x&amp;y&amp;z&amp;1\end{bmatrix}\times\begin{bmatrix}a &amp; 0 &amp; 0 &amp; 0 \0 &amp; b &amp; 0 &amp; 0 \0 &amp; 0 &amp; c &amp; 0 \0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}=\begin{bmatrix}ax&amp;by&amp;cz&amp;1\end{bmatrix}
$$</p>
<div class="edit-meta">
Last updated on 16 Nov 2019


<br>
Published on 16 Nov 2019
<br><a href="https://gitee.com/hanyutan/hanyutan/edit/master/content/digital_content%5caffine_transformation.md" class="edit-page"><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><nav class="pagination"><a class="nav nav-prev" href="/digital_content/image_processing/" title="Image Processing"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Image Processing</a>
<a class="nav nav-next" href="/chapter3/" title="Chapter 3 (hierarchized)">Next - Chapter 3 (hierarchized) <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">
<nav>
<ul>
<li class=""><a href="https://hanyutan.gitee.io">Home</a></li>

<li class=""><a href="/01_course/">Course</a>
<ul class="">
<li class=""><a href="/01_course/r_cheat_sheet/">R Cheat-Sheet</a></li>
<li class=""><a href="/01_course/spark/">Spark</a></li>
<li class=""><a href="/01_course/latex/">Latex</a></li>

<li class=""><a href="/01_course/python_cheat_sheet/">Python Cheat Sheet</a>
<ul class="">
<li class=""><a href="/01_course/python_cheat_sheet/basic/">Basic</a></li>
<li class=""><a href="/01_course/python_cheat_sheet/pandas/">Pandas</a></li>
<li class=""><a href="/01_course/python_cheat_sheet/plot/">Plot</a></li>
<li class=""><a href="/01_course/python_cheat_sheet/numpy/">Numpy</a></li>
<li class=""><a href="/01_course/python_cheat_sheet/data_preprocessing/">Data Pre-processing</a></li>
</ul>
  
</li>

<li class=""><a href="/01_course/financial_risk_management/">Financial Risk Management</a>
<ul class="">
<li class=""><a href="/01_course/financial_risk_management/markowitz/">Markowitz</a></li>
<li class=""><a href="/01_course/financial_risk_management/binomial_trees/">Binomial Trees</a></li>
<li class=""><a href="/01_course/financial_risk_management/bsm_model/">BSM Model</a></li>
<li class=""><a href="/01_course/financial_risk_management/greeks/">Hedging with the Greeks</a></li>
<li class=""><a href="/01_course/financial_risk_management/exam/">Exam</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="/02_big_data/">Big Data Analysis</a>
<ul class="">

<li class=""><a href="/02_big_data/machine_learning/">Machine Learning</a>
<ul class="">
<li class=""><a href="/02_big_data/machine_learning/random_forest/">Random Forest</a></li>
<li class=""><a href="/02_big_data/machine_learning/bagging/">Bagging</a></li>
<li class=""><a href="/02_big_data/machine_learning/knn/">KNN</a></li>
<li class=""><a href="/02_big_data/machine_learning/linear_regression/">Linear Regression</a></li>
<li class=""><a href="/02_big_data/machine_learning/pca/">PCA</a></li>
<li class=""><a href="/02_big_data/machine_learning/train_test/">Train &amp; Test</a></li>
<li class=""><a href="/02_big_data/machine_learning/clustering/">Clustering</a></li>
<li class=""><a href="/02_big_data/machine_learning/naive_bayes/">Naive Bayes</a></li>
</ul>
  
</li>
<li class=""><a href="/02_big_data/gan/">GAN</a></li>
<li class=""><a href="/02_big_data/tensorflow/">Tensorflow</a></li>

<li class=""><a href="/02_big_data/reinforcement_learning/">Reinforcement Learning</a>
<ul class="">
<li class=""><a href="/02_big_data/reinforcement_learning/rl_with_kg/">RL with KG</a></li>
</ul>
  
</li>

<li class=""><a href="/02_big_data/text_mining/">Text Mining</a>
<ul class="">
<li class=""><a href="/02_big_data/text_mining/regular_expression/">Regular Expression</a></li>
</ul>
  
</li>
<li class=""><a href="/02_big_data/caffe/">Caffe</a></li>
<li class=""><a href="/02_big_data/data_mining/">Data Mining</a></li>
</ul>
  
</li>

<li class=""><a href="/build_blog/">Build Blogs</a>
<ul class="">
<li class=""><a href="/build_blog/01_introduction/">Introduction</a></li>
<li class=""><a href="/build_blog/02_preparation/">Preparation</a></li>
<li class=""><a href="/build_blog/03_quick_start/">Quick Start</a></li>
<li class=""><a href="/build_blog/04_git_notes/">Git Notes</a></li>
<li class=""><a href="/build_blog/05_hugo_notes/">Hugo Notes</a></li>
<li class=""><a href="/build_blog/06_markdown_notes/">Markdown Notes</a></li>
<li class=""><a href="/build_blog/07_questions/">Q&amp;A</a></li>
<li class=""><a href="/build_blog/scoop/">Scoop</a></li>
</ul>
  
</li>

<li class=""><a href="/03_interests/">Interests</a>
<ul class="">
<li class=""><a href="/03_interests/japanese/">Japanese</a></li>
<li class=""><a href="/03_interests/hunt_for_stars/">Hunt for Stars</a></li>
<li class=""><a href="/03_interests/diy_pc/">DIY PC</a></li>
</ul>
  
</li>

<li class=""><a href="/04_reading/">Reading</a>
<ul class="">
<li class=""><a href="/04_reading/reading_notes/">Reading Notes</a></li>
<li class=""><a href="/04_reading/nonsense_output/">Nonsense Output</a></li>
<li class=""><a href="/04_reading/wisdom_from_others/">Wisdom From Others</a></li>
</ul>
  
</li>

<li class=""><a href="/mathematics/">Mathematics</a>
<ul class="">
<li class=""><a href="/mathematics/advanced_mathematical_statistics/">Mathematical Analysis</a></li>
<li class=""><a href="/mathematics/mathematical_analysis/">Mathematical Analysis</a></li>
<li class=""><a href="/mathematics/functional_analysis/">Functional Analysis</a></li>
</ul>
  
</li>

<li class="parent"><a href="/digital_content/">Digital Content</a>
<ul class="sub-menu">
<li class=""><a href="/digital_content/opengl/">OpenGL</a></li>
<li class=""><a href="/digital_content/shader/">Shader</a></li>
<li class=""><a href="/digital_content/3dmax/">3dmax</a></li>
<li class=""><a href="/digital_content/smpl/">SMPL</a></li>
<li class=""><a href="/digital_content/image_processing/">Image Processing</a></li>
<li class="active"><a href="/digital_content/affine_transformation/">Affine Transformation</a></li>
</ul>
  
</li>

<li class=""><a href="/chapter3/">Chapter 3 (hierarchized)</a>
<ul class="">
<li class=""><a href="/chapter3/1/">Chapter 3-1</a></li>

<li class=""><a href="/chapter3/chapter3-2/">Chapter 3-2</a>
<ul class="">
<li class=""><a href="/chapter3/chapter3-2/1/">Chapter 3-2-1</a></li>
<li class=""><a href="/chapter3/chapter3-2/2/">Chapter 3-2-2</a></li>
<li class=""><a href="/chapter3/chapter3-2/3/">Chapter 3-2-3</a></li>
<li class=""><a href="/chapter3/chapter3-2/4/">Chapter 3-2-4</a></li>
</ul>
  
</li>
<li class=""><a href="/chapter3/3/">Chapter 3-3</a></li>
<li class=""><a href="/chapter3/4/">Chapter 3-4</a></li>
</ul>
  
</li>

<li class=""><a href="/default_post/">Default_posts</a>
<ul class="">
<li class=""><a href="/default_post/installation/">Installation</a></li>
<li class=""><a href="/default_post/creating-a-new-theme/">Creating a New Theme</a></li>
<li class=""><a href="/default_post/migrate-from-jekyll/">Migrate to Hugo from Jekyll</a></li>
<li class=""><a href="/default_post/configuration/">Configuration</a></li>
<li class=""><a href="/default_post/goisforlovers/">(Hu)go Template Primer</a></li>
<li class=""><a href="/default_post/hugoisforlovers/">Getting Started with Hugo</a></li>
</ul>
  
</li>
</ul>
</nav>


<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
